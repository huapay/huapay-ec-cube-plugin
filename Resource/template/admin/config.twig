{% extends 'default_frame.twig' %}

{% set menus = ['store', 'plugin', 'plugin_list'] %}

{% block title %}Huapay{% endblock %}
{% block sub_title %}プラグイン設定{% endblock %}

{% form_theme form 'Form/bootstrap_3_horizontal_layout.html.twig' %}

{% block main %}
    <form class="form-horizontal" method="post" action="{{ url('plugin_HuapayPlugin_config') }}">
        {{ form_widget(form._token) }}
        <div class="row" id="aside_wrap">
            <div class="col-md-9">
<div class="box">
  <div class="box-header"><h3 class="box-title">はじめに</h3></div>
  <div class="box-body">Huapayをお使いいただきありがとうございます。</div>
</div>

                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">APIトークン</h3>
                    </div><!-- /.box-header -->
                    <div class="box-body form-horizontal">
                        {{ form_row(form.api_token) }}
                    </div><!-- /.box-body -->
                </div><!-- /.box -->

                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">接続環境</h3>
                    </div><!-- /.box-header -->
                    <div class="box-body form-horizontal">
                        {{ form_label(form.is_testing, ' ') }}
                        {{ form_widget(form.is_testing) }}
                        {{ form_errors(form.is_testing) }}
                    </div><!-- /.box-body -->
                </div><!-- /.box -->

                <div class="box">
                    <div class="box-header">
                        <h3 class="box-title">決済手段</h3>
                    </div><!-- /.box-header -->

                    <div class="box-body form-horizontal">
{%- for k, v in constant('Plugin\\HuapayPlugin\\Constants::PAYMENT_METHOD_INFO') -%}
    {%- set uses_attr = 'uses_' ~ attribute(v, 'shortname') -%}
                        <div class="row">
                            <label class="col-xs-8 control-label required">{{ attribute(v, 'name') }}</label>
                            <div class="col-xs-4">
                                {{ form_widget(attribute(form, uses_attr)) }}
                            {{ form_errors(attribute(form, uses_attr)) }}
</div>
                        </div>

{%- endfor -%}
                    </div><!-- /.box-body -->
                </div><!-- /.box -->

            </div><!-- /.col -->
            <div class="col-md-3" id="aside_column">
                <div id="common_box" class="col_inner">
                    <div id="common_button_box" class="box no-header">
                        <div id="common_button_box__body" class="box-body">
                            <div id="common_button_box__edit_button" class="row text-center">
                                <div class="col-sm-6 col-sm-offset-3 col-md-12 col-md-offset-0">
                                    <button class="btn btn-primary btn-block btn-lg" type="submit">設定</button>
                                </div>
                            </div>
                        </div><!-- /.box-body -->
                    </div><!-- /.box -->
                </div>
            </div><!-- /.col -->
        </div>
    </form>
{% endblock main %}
